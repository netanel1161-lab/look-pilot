<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×›×œ×™ ×ª×¨×’×•× ××•×“×œ×™× - Model Translator</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700&display=swap');
        
        body { font-family: 'Heebo', sans-serif; background-color: #f8fafc; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // --- Icons Setup ---
        const LucideIcons = Object.keys(window.lucide.icons).reduce((acc, key) => {
            const pascalKey = key.charAt(0).toUpperCase() + key.slice(1);
            const IconData = window.lucide.icons[key];
            acc[pascalKey] = ({ className, size = 24, ...props }) => (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                    {IconData.children && IconData.children.map((child, idx) => React.createElement(child[0], { ...child[1], key: idx }))}
                </svg>
            );
            return acc;
        }, {});
        
        // Destructuring icons
        const { Search, ArrowRight, Database, Car, CheckCircle, AlertTriangle, FileJson, UploadCloud, RefreshCw, XCircle, Image: ImageIcon, Camera, Monitor } = LucideIcons;

        // --- Dictionaries ---
        const HEBREW_COLOR_MAP = {
            "×œ×‘×Ÿ": "white", "×©× ×”×‘": "white", "×¤× ×™× ×”": "white",
            "×©×—×•×¨": "black",
            "××¤×•×¨": "gray", "×›×¡×£": "gray", "××˜×œ×™": "gray", "×’×¨×¤×™×˜": "gray", "×¢×›×‘×¨": "gray", "×˜×™×˜× ×™×•×": "gray",
            "×›×—×•×œ": "blue", "×ª×›×œ×ª": "blue", "×˜×•×¨×§×™×–": "blue",
            "××“×•×": "red", "×‘×•×¨×“×•": "red", "×™×™×Ÿ": "red",
            "×›×ª×•×": "red", "×—×•×": "gray", "×‘×–": "white", "×¦×”×•×‘": "white", "×™×¨×•×§": "gray", "×–×”×‘": "white"
        };

        const HEBREW_MAKE_MAP = {
            "×××–×“×”": "Mazda", "×˜×•×™×•×˜×”": "Toyota", "×™×•× ×“××™": "Hyundai", "×§×™×”": "Kia",
            "×¡×§×•×“×”": "Skoda", "××™×¦×•×‘×™×©×™": "Mitsubishi", "×¡×™××˜": "Seat", "×××•×“×™": "Audi",
            "×¤×•×œ×§×¡×•×•×’×Ÿ": "Volkswagen", "×¨× ×•": "Renault", "×¤×™×’'×•": "Peugeot", "×¡×™×˜×¨×•××Ÿ": "Citroen",
            "×©×‘×¨×•×œ×˜": "Chevrolet", "×¤×•×¨×“": "Ford", "×¡×•×–×•×§×™": "Suzuki", "×”×•× ×“×”": "Honda",
            "× ×™×¡××Ÿ": "Nissan", "×‘.×.×•×•": "BMW", "××¨×¦×“×¡": "Mercedes-Benz", "×˜×¡×œ×”": "Tesla",
            "×’'×™×¤": "Jeep", "×¡×•×‘××¨×•": "Subaru", "××™×¡×•×–×•": "Isuzu", "××•×¤×œ": "Opel", "×¤×™××˜": "Fiat",
            "×“××¦'×™×”": "Dacia", "×¦'×¨×™": "Chery", "×’'×™×œ×™": "Geely", "××.×’'×™": "MG", "×‘×™.×•×•×™×™.×“×™": "BYD",
            "×§×•×¤×¨×”": "Cupra"
        };

        // --- Logic Helpers ---
        const getCarImageUrl = (make, model, year, color, view) => {
            // × ×¨××•×œ ×©××•×ª ×œ-URL (××•×ª×™×•×ª ×§×˜× ×•×ª)
            const cleanMake = make?.toLowerCase().trim() || 'unknown';
            const cleanModel = model?.toLowerCase().trim() || 'unknown';
            const cleanColor = color || 'white';
            const cleanView = view || 'main'; // ×‘×¨×™×¨×ª ××—×“×œ main
            
            return `https://hnsgimjxowxjjcdypvjw.supabase.co/storage/v1/object/public/cars/${cleanMake}/${cleanModel}/${year}/${cleanColor}_${cleanView}.webp`;
        };

        const fetchGovData = async (plate) => {
            try {
                const resource_id = '053cea08-09bc-40ec-8f7a-156f0677aff3'; 
                const url = `https://data.gov.il/api/3/action/datastore_search?resource_id=${resource_id}&q=${plate}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success && data.result.records.length > 0) {
                    return data.result.records[0];
                }
                return null;
            } catch (error) {
                console.error("API Error:", error);
                return null;
            }
        };

        function TranslatorApp() {
            // --- State ---
            const [vehiclePool, setVehiclePool] = useState([]); 
            const [translations, setTranslations] = useState([]); 

            const [inputPlate, setInputPlate] = useState('21720801');
            const [isLoading, setIsLoading] = useState(false);
            const [rawData, setRawData] = useState(null);
            
            const [imageStatus, setImageStatus] = useState('idle');

            // ×”× ×ª×•× ×™× ×”×××•×¤×™× (×‘×× ×’×œ×™×ª)
            const [mappedData, setMappedData] = useState({
                make: '',
                model: '',
                year: '',
                color: '',
                view: 'main' // ×‘×¨×™×¨×ª ××—×“×œ: main
            });

            // --- Load Vehicle Pool ---
            useEffect(() => {
                fetch('./data/Vehicle_pool.json')
                    .then(res => res.json())
                    .then(data => setVehiclePool(data))
                    .catch(() => console.log("Manual upload required"));
            }, []);

            const handlePoolUpload = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const data = JSON.parse(event.target.result);
                        setVehiclePool(data);
                        alert(`×××’×¨ ×¤× ×™××™ × ×˜×¢×Ÿ: ${data.length} ×¨×›×‘×™×`);
                    } catch (e) { alert("×©×’×™××” ×‘×§×•×‘×¥"); }
                };
                reader.readAsText(file);
            };

            // ×—×™×¤×•×© ×•×¢×™×‘×•×“
            const handleSearch = async () => {
                if (!inputPlate) return;
                setIsLoading(true);
                setRawData(null);
                setImageStatus('idle');

                const govRecord = await fetchGovData(inputPlate);
                setIsLoading(false);

                if (govRecord) {
                    setRawData(govRecord);
                    
                    const hebrewMake = govRecord.tozeret_nm || "";
                    const hebrewModel = govRecord.kinuy_mishari || "";
                    const hebrewColor = govRecord.tzeva_rechev || "";
                    const year = govRecord.shnat_yitzur || "2020";

                    // ×ª×¨×’×•× ×™×¦×¨×Ÿ
                    let engMake = HEBREW_MAKE_MAP[hebrewMake.split(' ')[0]] || hebrewMake.split(' ')[0];
                    
                    // ×ª×¨×’×•× ×“×’× (× ×™×¡×™×•×Ÿ ×œ××¦×•× ×‘×××’×¨)
                    let engModel = "";
                    if (vehiclePool.length > 0) {
                        const brandModels = vehiclePool.filter(c => c.make.toLowerCase() === engMake.toLowerCase());
                        const found = brandModels.find(c => hebrewModel.toLowerCase().includes(c.modelFamily.toLowerCase()));
                        if (found) engModel = found.modelFamily;
                    }
                    if (!engModel) engModel = hebrewModel.replace(/[×-×ª]/g, '').trim(); 

                    // ×ª×¨×’×•× ×¦×‘×¢
                    const engColor = HEBREW_COLOR_MAP[hebrewColor] || 'white';

                    setMappedData({
                        make: engMake,
                        model: engModel,
                        year: year,
                        color: engColor,
                        view: 'main' // ×ª××™×“ ××ª×—×™×œ ×‘-main
                    });
                    setImageStatus('loading');
                } else {
                    alert("×¨×›×‘ ×œ× × ××¦× ×‘×××’×¨ ×”×××©×œ×ª×™");
                }
            };

            const addToTranslations = () => {
                if (!rawData) return;
                
                const newRule = {
                    gov_id: rawData._id, 
                    plate: rawData.mispar_rechev,
                    original: {
                        make: rawData.tozeret_nm,
                        model: rawData.kinuy_mishari,
                        color: rawData.tzeva_rechev,
                        year: rawData.shnat_yitzur
                    },
                    translated: {
                        make: mappedData.make,
                        model: mappedData.model,
                        year: mappedData.year,
                        color: mappedData.color
                    },
                    // ×©×•××¨ ×§×™×©×•×¨ ×œ-Main ×›×‘×¨×™×¨×ª ××—×“×œ, ××‘×œ ××¤×©×¨ ×œ×©××•×¨ ××ª ×©× ×™×”× ×‘××¢×¨×›×ª ×”×××™×ª×™×ª
                    imageMain: getCarImageUrl(mappedData.make, mappedData.model, mappedData.year, mappedData.color, 'main'),
                    imageSide: getCarImageUrl(mappedData.make, mappedData.model, mappedData.year, mappedData.color, 'side'),
                    
                    status: 'approved',
                    timestamp: new Date().toISOString()
                };

                setTranslations(prev => [newRule, ...prev]);
                setRawData(null);
                setInputPlate('');
                setMappedData({ make: '', model: '', year: '', color: '', view: 'main' });
            };

            const downloadTranslations = () => {
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(translations, null, 2));
                const a = document.createElement('a');
                a.href = dataStr;
                a.download = `translations_${new Date().toISOString().slice(0,10)}.json`;
                document.body.appendChild(a);
                a.click();
                a.remove();
            };

            const uniqueMakes = useMemo(() => [...new Set(vehiclePool.map(c => c.make))].sort(), [vehiclePool]);
            const availableModels = useMemo(() => {
                return vehiclePool
                    .filter(c => c.make.toLowerCase() === mappedData.make.toLowerCase())
                    .map(c => c.modelFamily)
                    .sort();
            }, [vehiclePool, mappedData.make]);

            // ×”×›×ª×•×‘×ª ×”× ×•×›×—×™×ª ×œ×ª×¦×•×’×”
            const currentImageUrl = getCarImageUrl(mappedData.make, mappedData.model, mappedData.year, mappedData.color, mappedData.view);

            return (
                <div className="min-h-screen p-8 max-w-7xl mx-auto" dir="rtl">
                    
                    <header className="flex justify-between items-center mb-8 bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                        <div>
                            <h1 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                <RefreshCw className="text-blue-600"/> ×‘×§×¨×ª ×ª×¨×’×•× ×•×ª××•× ×•×ª
                            </h1>
                            <p className="text-sm text-gray-500">××™×ª×•×¨ ×ª××•× ×•×ª ××ª××™××•×ª ×œ×××’×¨ ×”×¨×›×‘</p>
                        </div>
                        <div className="flex gap-4">
                            <label className="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg cursor-pointer text-sm font-medium transition-colors">
                                <UploadCloud size={16} />
                                <span>×˜×¢×Ÿ ×××’×¨ (×’×™×‘×•×™)</span>
                                <input type="file" onChange={handlePoolUpload} className="hidden" accept=".json"/>
                            </label>
                            <button onClick={downloadTranslations} disabled={translations.length === 0} className="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 disabled:opacity-50">
                                <FileJson size={16} /> ×™×™×¦× ({translations.length})
                            </button>
                        </div>
                    </header>

                    <div className="bg-white p-6 rounded-2xl shadow-md border border-blue-100 mb-8 flex gap-4 items-center">
                        <div className="flex-1">
                            <label className="block text-xs font-bold text-gray-500 mb-1">××¡×¤×¨ ×¨×™×©×•×™</label>
                            <div className="relative">
                                <input 
                                    type="text" 
                                    value={inputPlate}
                                    onChange={(e) => setInputPlate(e.target.value)}
                                    onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
                                    className="w-full text-3xl font-mono font-bold tracking-widest border-2 border-yellow-400 bg-yellow-50 p-3 rounded-lg text-center focus:outline-none focus:border-yellow-500"
                                    placeholder="12345678"
                                />
                                <div className="absolute left-4 top-1/2 -translate-y-1/2 bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded font-bold">IL</div>
                            </div>
                        </div>
                        <button onClick={handleSearch} disabled={isLoading} className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-blue-200 transition-all flex items-center gap-2 h-full mt-6">
                            {isLoading ? '...' : <Search size={24}/>}
                        </button>
                    </div>

                    {rawData && (
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in fade-in slide-in-from-bottom-4">
                            
                            {/* Source Data */}
                            <div className="lg:col-span-3 bg-gray-50 p-6 rounded-2xl border border-gray-200 h-fit">
                                <div className="flex items-center gap-2 mb-4 border-b pb-2 border-gray-200">
                                    <Database className="text-gray-400"/>
                                    <h2 className="font-bold text-gray-700">××§×•×¨ (×¢×‘×¨×™×ª)</h2>
                                </div>
                                <div className="space-y-4">
                                    <div><label className="text-xs text-gray-400">×ª×•×¦×¨</label><div className="font-medium text-lg text-gray-800">{rawData.tozeret_nm}</div></div>
                                    <div><label className="text-xs text-gray-400">×“×’×</label><div className="font-medium text-lg text-gray-800">{rawData.kinuy_mishari}</div></div>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div><label className="text-xs text-gray-400">×©× ×”</label><div className="font-medium">{rawData.shnat_yitzur}</div></div>
                                        <div><label className="text-xs text-gray-400">×¦×‘×¢</label><div className="font-medium">{rawData.tzeva_rechev}</div></div>
                                    </div>
                                </div>
                            </div>

                            {/* Arrow */}
                            <div className="lg:col-span-1 flex flex-col items-center justify-center text-blue-300">
                                <ArrowRight size={48} className="hidden lg:block"/>
                            </div>

                            {/* Target Data & Preview */}
                            <div className="lg:col-span-8 bg-white p-6 rounded-2xl border-2 border-blue-100 shadow-xl relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-500 to-indigo-500"></div>
                                
                                <div className="flex justify-between items-start mb-6">
                                    <div className="flex items-center gap-2">
                                        <Monitor className="text-blue-600"/>
                                        <h2 className="font-bold text-xl text-gray-800">×”×ª×××” ×œ××¢×¨×›×ª (×× ×’×œ×™×ª)</h2>
                                    </div>
                                    {/* Image Status */}
                                    <div className={`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-2 ${
                                        imageStatus === 'found' ? 'bg-green-100 text-green-700' : 
                                        imageStatus === 'error' ? 'bg-red-100 text-red-700' : 'bg-yellow-50 text-yellow-600'
                                    }`}>
                                        {imageStatus === 'found' ? <><CheckCircle size={14}/> ×ª××•× ×” × ××¦××”</> : 
                                         imageStatus === 'error' ? <><XCircle size={14}/> ××™×Ÿ ×ª××•× ×”</> : '×˜×•×¢×Ÿ...'}
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    
                                    {/* ×˜×•×¤×¡ ×¢×¨×™×›×” */}
                                    <div className="space-y-5">
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-xs font-bold text-blue-700 mb-1 block">×™×¦×¨×Ÿ (Make)</label>
                                                <input 
                                                    list="makes" type="text"
                                                    value={mappedData.make} 
                                                    onChange={(e) => setMappedData(p => ({...p, make: e.target.value}))}
                                                    className="w-full border-2 border-blue-100 rounded-lg p-2.5 font-medium focus:border-blue-500 outline-none bg-blue-50/30"
                                                />
                                                <datalist id="makes">{uniqueMakes.map(m => <option key={m} value={m} />)}</datalist>
                                            </div>
                                            <div>
                                                <label className="text-xs font-bold text-blue-700 mb-1 block">×“×’× (Model)</label>
                                                <input 
                                                    list="models" type="text"
                                                    value={mappedData.model} 
                                                    onChange={(e) => setMappedData(p => ({...p, model: e.target.value}))}
                                                    className="w-full border-2 border-blue-100 rounded-lg p-2.5 font-medium focus:border-blue-500 outline-none bg-blue-50/30"
                                                />
                                                <datalist id="models">{availableModels.map(m => <option key={m} value={m} />)}</datalist>
                                            </div>
                                        </div>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-xs text-gray-500 mb-1 block">×©× ×” (2016-2025)</label>
                                                <input type="number" value={mappedData.year} onChange={(e)=>setMappedData(p=>({...p, year: e.target.value}))} className="w-full bg-white border p-2 rounded font-mono" />
                                            </div>
                                            <div>
                                                <label className="text-xs text-gray-500 mb-1 block">×¦×‘×¢</label>
                                                <select value={mappedData.color} onChange={(e)=>setMappedData(p=>({...p, color: e.target.value}))} className="w-full bg-white border p-2 rounded">
                                                    <option value="white">White</option>
                                                    <option value="black">Black</option>
                                                    <option value="gray">Gray</option>
                                                    <option value="blue">Blue</option>
                                                    <option value="red">Red</option>
                                                </select>
                                            </div>
                                        </div>

                                        {/* View Selector */}
                                        <div className="pt-2">
                                            <label className="text-xs font-bold text-gray-500 mb-2 block">×‘×—×¨ ×–×•×•×™×ª ×œ×”×¦×’×”:</label>
                                            <div className="flex gap-2">
                                                <button 
                                                    onClick={() => setMappedData(p => ({...p, view: 'main'}))}
                                                    className={`flex-1 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 border ${mappedData.view === 'main' ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-600 border-gray-300 hover:bg-gray-50'}`}
                                                >
                                                    <Camera size={16} /> ×§×“××™×ª (Main)
                                                </button>
                                                <button 
                                                    onClick={() => setMappedData(p => ({...p, view: 'side'}))}
                                                    className={`flex-1 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 border ${mappedData.view === 'side' ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-600 border-gray-300 hover:bg-gray-50'}`}
                                                >
                                                    <Car size={16} /> ×¦×“ (Side)
                                                </button>
                                            </div>
                                        </div>

                                        <div className="pt-4 mt-2 border-t border-gray-100">
                                            <button onClick={addToTranslations} className="w-full bg-green-600 hover:bg-green-700 text-white py-3.5 rounded-xl font-bold shadow-md transition-all hover:scale-[1.02] active:scale-95 flex justify-center items-center gap-2">
                                                <CheckCircle size={20} /> ××©×¨ ×ª×¨×’×•× ×•×”×•×¡×£ ×œ×¨×©×™××”
                                            </button>
                                        </div>
                                    </div>

                                    {/* Preview */}
                                    <div className="flex flex-col gap-2">
                                        <div className={`relative w-full aspect-[4/3] bg-slate-100 rounded-xl flex items-center justify-center overflow-hidden border-2 transition-colors ${imageStatus === 'error' ? 'border-red-200 bg-red-50' : 'border-gray-200'}`}>
                                            <img 
                                                src={currentImageUrl} 
                                                onLoad={() => setImageStatus('found')}
                                                onError={() => setImageStatus('error')}
                                                className={`w-full h-full object-contain p-4 transition-opacity duration-300 ${imageStatus === 'error' ? 'opacity-30 grayscale' : 'opacity-100'}`}
                                            />
                                            {imageStatus === 'error' && (
                                                <div className="absolute inset-0 flex flex-col items-center justify-center text-red-400">
                                                    <ImageIcon size={48} className="mb-2 opacity-50"/>
                                                    <span className="text-sm font-bold">×œ× × ××¦××” ×ª××•× ×”</span>
                                                    <span className="text-[10px]">×‘×“×•×§ ××ª ×”×©× ×” ××• ×”×“×’×</span>
                                                </div>
                                            )}
                                            
                                            {/* Info Badge */}
                                            <div className="absolute bottom-2 right-2 bg-black/60 text-white text-[10px] px-2 py-1 rounded backdrop-blur font-mono dir-ltr">
                                                {mappedData.make}/{mappedData.model}/{mappedData.view}
                                            </div>
                                        </div>
                                        
                                        <div className="text-[10px] text-gray-400 text-center bg-gray-50 p-2 rounded border border-gray-100 truncate font-mono direction-ltr">
                                            {currentImageUrl}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Translations Table */}
                    {translations.length > 0 && (
                        <div className="mt-12 bg-white rounded-2xl shadow border border-gray-200 overflow-hidden">
                            <div className="p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center">
                                <h3 className="font-bold text-gray-700">×¨×©×™××” ×œ×™×™×¦×•×</h3>
                                <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">{translations.length}</span>
                            </div>
                            <div className="overflow-x-auto">
                                <table className="w-full text-sm text-right">
                                    <thead className="bg-white text-gray-500">
                                        <tr>
                                            <th className="p-4">×œ×•×—×™×ª</th>
                                            <th className="p-4">××§×•×¨</th>
                                            <th className="p-4 text-center">ğŸ¡ </th>
                                            <th className="p-4">×ª×¨×’×•× (×× ×’×œ×™×ª)</th>
                                            <th className="p-4">×ª××•× ×” (Main)</th>
                                            <th className="p-4">×¤×¢×•×œ×”</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-gray-100">
                                        {translations.map((t, i) => (
                                            <tr key={i} className="hover:bg-gray-50">
                                                <td className="p-4 font-mono font-bold">{t.plate}</td>
                                                <td className="p-4 text-gray-600">{t.original.make} {t.original.model}</td>
                                                <td className="p-4 text-center text-gray-300">âœ</td>
                                                <td className="p-4 font-medium text-blue-700">
                                                    {t.translated.make} {t.translated.model} ({t.translated.color})
                                                </td>
                                                <td className="p-4"><img src={t.imageMain} className="w-16 h-10 object-contain bg-slate-100 rounded border" /></td>
                                                <td className="p-4"><button onClick={() => setTranslations(p => p.filter((_, idx) => idx !== i))} className="text-red-400 hover:text-red-600">×”×¡×¨</button></td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TranslatorApp />);
        
        setTimeout(() => { if (window.lucide) window.lucide.createIcons(); }, 500);
    </script>
</body>
</html>